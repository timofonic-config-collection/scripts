#!/bin/sh
# Script by Ypnose  <linuxien[AT]legtux[DOT]org>

DF="$(tput sgr0)"
GR="$(tput setaf 2)"
RD="$(tput setaf 1)"

# VALUE = 254
HDP=$(sudo hdparm -I /dev/sda | awk '/Advanced power/ {print $5}')
if [ -x "/sbin/hdparm" ]; then
	if [ "$HDP" = "254" ]; then
		printf "$GR%d$DF\n" "$HDP"
	else
		printf "$RD%d$DF\n" "$HDP"
	fi
else
	printf "%s\n" "Hdparm is not installed!" >&2
fi

# VALUE1 = profile | VALUE2 = mid or low
PWM=$(cat /sys/class/drm/card0/device/power_method)
PWP=$(cat /sys/class/drm/card0/device/power_profile)
if [ "$PWM" = "profile" ]; then
	printf "$GR%s$DF\n" "$PWM"
else
	printf "$RD%s$DF\n" "$PWM"
fi
if [ "$PWP" = "low" ]; then
	printf "$GR%s$DF\n" "$PWP"
else
	printf "$RD%s$DF\n" "$PWP"
fi

exit
