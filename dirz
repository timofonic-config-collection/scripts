#!/usr/bin/mksh
# Script by Ypnose - http://ywstd.fr
# List folders sizes

function colorize {
	while IFS=$'\t' read -r SIZE FILDIR; do
		print -- "\033[1;35m${SIZE}\033[0m\t${FILDIR}"
	done
}

if [[ $1 = "-h" ]]; then
	print "usage: ${0##*/} [-h] [-r]"
	print "  -r   List the directory size recursively"
	exit
fi

if [[ $1 = "-r" ]]; then
	if (( $(du -h "./" | wc -l) > 36 )); then
		du -h "./" | colorize | less -R
	else
		du -h "./" | colorize
	fi
elif [[ -z $1 ]]; then
	du -sh ./*/ | colorize
else
	du -sh -- "$@" | colorize
fi

exit
