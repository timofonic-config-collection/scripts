#!/bin/sh
#   Script by Ypnose  <linuxien[AT]legtux[DOT]org>
#   Remove trash files from Windows or KDE (Thumbs.db for example)

THU=$(find -type f -iname "Thumbs.db" | wc -l)
DES=$(find -type f -iname "desktop.ini" | wc -l)
DIR=$(find -type f -iname ".directory" | wc -l)
DF=$(tput sgr0)
RD=$(tput setaf 1)
GR=$(tput setaf 2)

if [ "$THU" != 0 ]; then
	printf "You have $RD%d$DF Thumbs.db\n" "$THU"
fi

if [ "$DES" != 0 ]; then
	printf "You have $RD%d$DF desktop.ini\n" "$DES"
fi

if [ "$DIR" != 0 ]; then
	printf "You have $RD%d$DF .directory\n" "$DIR"
fi

if [ -z "$(find -type f -iname 'Thumbs.db')" ]; then
	printf "$GR%s$DF\n" "No Thumbs.db file has been detected"
else 
	find -type f -iname "Thumbs.db" | sed 's/./\\&/g' | xargs rm
	printf "$RD%s$DF\n" "All Thumbs.db files found have been successfully deleted"
fi

if [ -z "$(find -type f -iname 'desktop.ini*')" ]; then
	printf "$GR%s$DF\n" "No desktop.ini file has been detected"
else 
	find -type f -iname "desktop.ini*" | sed 's/./\\&/g' | xargs rm
	printf "$RD%s$DF\n" "All desktop.ini files found have been successfully deleted"
fi

if [ -z "$(find -type f -iname '.directory')" ]; then
	printf "$GR%s$DF\n" "No .directory file has been detected"
else 
	find -type f -iname ".directory*" | sed 's/./\\&/g' | xargs rm
	printf "$RD%s$DF\n" "All .directory files found have been successfully deleted"
fi
exit
